<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Gestión CUSAF - Datos Socioeconómicos</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <style>
    :root {
      --primary: #2E7D32;
      --secondary: #4CAF50;
      --light: #E8F5E9;
      --dark: #1B5E20;
      --accent: #8BC34A;
      --warning: #FFC107;
      --danger: #F44336;
      --gray: #757575;
      --light-gray: #F5F5F5;
      --border-radius: 6px;
      --box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }
    
    .container {
      display: flex;
      min-height: 100vh;
    }
    
    /* Sidebar */
    .sidebar {
      width: 250px;
      background-color: var(--dark);
      color: white;
      padding-top: 20px;
      position: sticky;
      top: 0;
      height: 100vh;
    }
    
    .sidebar-header {
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }
    
    .sidebar-header h3 {
      font-size: 20px;
      font-weight: 600;
    }
    
    .nav-menu {
      list-style: none;
    }
    
    .nav-item {
      margin-bottom: 5px;
    }
    
    .nav-link {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: rgba(255,255,255,0.8);
      text-decoration: none;
      transition: all 0.3s;
      gap: 10px;
      font-size: 14px;
    }
    
    .nav-link:hover, .nav-link.active {
      background-color: var(--primary);
      color: white;
    }
    
    .nav-link i {
      width: 20px;
      text-align: center;
    }
    
    /* Main Content */
    .main-content {
      flex: 1;
      padding: 25px;
      overflow-y: auto;
    }
    
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    
    .page-title {
      font-size: 24px;
      color: var(--dark);
      font-weight: 600;
    }
    
    .breadcrumb {
      display: flex;
      list-style: none;
      background-color: #fff;
      padding: 8px 16px;
      border-radius: var(--border-radius);
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
      font-size: 14px;
    }
    
    .breadcrumb-item {
      display: flex;
      align-items: center;
    }
    
    .breadcrumb-item + .breadcrumb-item::before {
      content: "/";
      padding: 0 8px;
      color: var(--gray);
    }
    
    .breadcrumb-item a {
      color: var(--primary);
      text-decoration: none;
      transition: color 0.2s;
    }
    
    .breadcrumb-item a:hover {
      color: var(--dark);
    }
    
    .breadcrumb-item.active {
      color: var(--gray);
    }
    
    /* Cards */
    .card {
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      margin-bottom: 25px;
      overflow: hidden;
    }
    
    .card-header {
      padding: 16px 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #f9f9f9;
    }
    
    .card-title {
      font-size: 18px;
      color: var(--dark);
      margin: 0;
      font-weight: 600;
    }
    
    .card-body {
      padding: 25px;
    }
    
    /* Forms */
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #444;
      font-size: 14px;
    }
    
    .form-label.required::after {
      content: " *";
      color: var(--danger);
    }
    
    .form-control {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      font-size: 14px;
      transition: all 0.3s;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
    }
    
    select.form-control {
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23757575' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 12px;
      padding-right: 32px;
    }
    
    textarea.form-control {
      min-height: 80px;
      resize: vertical;
    }
    
    .form-row {
      display: flex;
      flex-wrap: wrap;
      margin-right: -10px;
      margin-left: -10px;
    }
    
    .form-col {
      padding-right: 10px;
      padding-left: 10px;
      flex: 1;
      min-width: 200px;
    }
    
    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 500;
      text-align: center;
      text-decoration: none;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: all 0.3s;
      gap: 8px;
    }
    
    .btn i {
      font-size: 13px;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: var(--dark);
      transform: translateY(-1px);
    }
    
    .btn-secondary {
      background-color: var(--gray);
      color: white;
    }
    
    .btn-secondary:hover {
      background-color: #616161;
      transform: translateY(-1px);
    }
    
    .btn-success {
      background-color: var(--secondary);
      color: white;
    }
    
    .btn-warning {
      background-color: var(--warning);
      color: white;
    }
    
    .btn-danger {
      background-color: var(--danger);
      color: white;
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
      overflow-x: auto;
    }
    
    .tab-item {
      padding: 12px 20px;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.3s;
      white-space: nowrap;
      font-size: 14px;
      color: var(--gray);
      font-weight: 500;
    }
    
    .tab-item:hover {
      color: var(--dark);
    }
    
    .tab-item.active {
      border-bottom-color: var(--primary);
      color: var(--primary);
      font-weight: 600;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Process steps */
    .process-steps {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      position: relative;
    }
    
    .process-steps::before {
      content: "";
      position: absolute;
      top: 15px;
      left: 0;
      right: 0;
      height: 2px;
      background-color: #ddd;
      z-index: 1;
    }
    
    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
      flex: 1;
    }
    
    .step-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-color: white;
      border: 2px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      color: var(--gray);
      font-weight: bold;
      transition: all 0.3s;
    }
    
    .step.active .step-icon {
      background-color: var(--primary);
      border-color: var(--primary);
      color: white;
    }
    
    .step.completed .step-icon {
      background-color: var(--secondary);
      border-color: var(--secondary);
      color: white;
    }
    
    .step-title {
      font-size: 12px;
      color: var(--gray);
      text-align: center;
      max-width: 100px;
    }
    
    .step.active .step-title {
      color: var(--primary);
      font-weight: 500;
    }
    
    /* Alerts */
    .alert {
      padding: 15px;
      border-radius: var(--border-radius);
      margin-bottom: 20px;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      font-size: 14px;
    }
    
    .alert i {
      font-size: 18px;
      margin-top: 2px;
    }
    
    .alert-info {
      background-color: #E3F2FD;
      color: #0D47A1;
      border-left: 4px solid #2196F3;
    }
    
    /* Sections */
    .section {
      margin-bottom: 30px;
    }
    
    .section-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .section-header h3 {
      font-size: 18px;
      color: var(--dark);
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .section-header i {
      color: var(--primary);
    }
    
    /* Checkbox and radio groups */
    .checkbox-group, .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .checkbox-item, .radio-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .checkbox-item input[type="checkbox"],
    .radio-item input[type="radio"] {
      width: 16px;
      height: 16px;
      accent-color: var(--primary);
    }
    
    /* Other fields */
    .other-field {
      margin-top: 10px;
      padding: 15px;
      background-color: #f9f9f9;
      border-radius: var(--border-radius);
      border: 1px dashed #ddd;
      display: none;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
      
      .form-col {
        min-width: 100%;
      }
      
      .tabs {
        flex-wrap: wrap;
      }
      
      .tab-item {
        padding: 10px 15px;
      }
    }
    
    /* Custom form elements */
    .inline-group {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .inline-group .form-group {
      flex: 1;
      min-width: 200px;
    }
    
    /* Species list */
    .species-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    
    .species-item {
      background-color: var(--light-gray);
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }
    
    .species-item i {
      color: var(--danger);
      cursor: pointer;
      font-size: 12px;
    }
    
    .add-species {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    .add-species input {
      flex: 1;
    }
    
    /* Form actions */
    .form-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    
    /* Validation styles */
    .is-invalid {
      border-color: var(--danger) !important;
    }
    
    .invalid-feedback {
      color: var(--danger);
      font-size: 13px;
      margin-top: 5px;
      display: none;
    }
    
    .is-invalid + .invalid-feedback {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <i class="fas fa-leaf"></i>
        <h3>SISTEMA CUSAF</h3>
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="index.html" class="nav-link">
            <i class="fas fa-tachometer-alt"></i>
            <span>Inicio</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="prime.html" class="nav-link">
            <i class="fas fa-map-marked-alt"></i>
            <span>Registro Áreas Potenciales</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="beneficiarios.html" class="nav-link active">
            <i class="fas fa-users"></i>
            <span>Registro Potenciales Beneficiarios</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link">
            <i class="fas fa-list"></i>
            <span>Listado</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link">
            <i class="fas fa-chart-bar"></i>
            <span>Reportes</span>
          </a>
        </li>
      </ul>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
      <div class="page-header">
        <h1 class="page-title">Registro de Potenciales Beneficiarios</h1>
       
      </div>
      
         <div class="card">
        <div class="card-body">
          <div class="process-steps">
            <div class="step active">
              <div class="step-icon"><i class="fas fa-male"></i></div>
              <div class="step-title">Presentación posibles Beneficiarios</div>
            </div>
            <div class="step">
              <div class="step-icon"><i class="fas fa-tree"></i></div>
              <div class="step-title">Trabajo de Campo</div>
            </div>
            <div class="step">
              <div class="step-icon"><i class="fas fa-pencil"></i></div>
              <div class="step-title">Elaboración del informe Tecnico</div>
            </div>
            <div class="step">
              <div class="step-icon"><i class="fas fa-check"></i></div>
              <div class="step-title">Otorgamiento del Derecho</div>
            </div>
            <div class="step">
              <div class="step-icon"><i class="fas fa-gavel"></i></div>
              <div class="step-title">Recursos Administrativos</div>
            </div>
            <div class="step">
              <div class="step-icon"><i class="fas fa-handshake"></i></div>
              <div class="step-title">Suscripcion del contrato</div>
            </div>
          </div>
          
         <div class="alert alert-info">
            <i class="fas fa-info-circle"></i>
            Complete toda la informacion solicitada. Los campos marcados con(*)son obligatorios.
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="card-body">
          <div class="tabs">
            <a href="beneficiarios.html"><div class="tab-item active"><i class="fas fa-user"></i> Datos Generales</div></a>
            <a href="potencialesbeneficiarios_socioeconomicos.html"><div class="tab-item active"><i class="fas fa-money-bill-wave"></i> Datos Socioeconómicos</div></a>
            <a href="potencialesbeneficiarios_datosagricolas.html"><div class="tab-item"><i class="fas fa-tractor"></i> Datos Agrícolas</div></a>
            
          </div>
          
          <div id="socioeconomic-data" class="tab-content active">
            <form id="socioeconomic-form">
              <!-- Sección 1: Información económica básica -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-chart-line"></i> Información Económica Básica</h3>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Ocupación principal</label>
                      <select class="form-control" name="ocupacion_principal" required>
                        <option value="">Seleccione...</option>
                        <option value="agricultor">Agricultor</option>
                        <option value="ganadero">Ganadero</option>
                        <option value="comerciante">Comerciante</option>
                        <option value="empleado_publico">Empleado público</option>
                        <option value="empleado_privado">Empleado privado</option>
                        <option value="independiente">Trabajador independiente</option>
                        <option value="jubilado">Jubilado/pensionista</option>
                        <option value="estudiante">Estudiante</option>
                        <option value="ama_casa">Ama de casa</option>
                        <option value="desempleado">Desempleado</option>
                        <option value="otro">Otro</option>
                      </select>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Ingreso mensual familiar (S/)</label>
                      <select class="form-control" name="ingreso_mensual" required>
                        <option value="">Seleccione rango...</option>
                        <option value="0-1025">Menos de S/1,025 (1 RMV)</option>
                        <option value="1026-2050">S/1,026 - S/2,050 (1-2 RMV)</option>
                        <option value="2051-3075">S/2,051 - S/3,075 (2-3 RMV)</option>
                        <option value="3076-4100">S/3,076 - S/4,100 (3-4 RMV)</option>
                        <option value="4101-5125">S/4,101 - S/5,125 (4-5 RMV)</option>
                        <option value="5126-6150">S/5,126 - S/6,150 (5-6 RMV)</option>
                        <option value="6151-7175">S/6,151 - S/7,175 (6-7 RMV)</option>
                        <option value="7176-8200">S/7,176 - S/8,200 (7-8 RMV)</option>
                        <option value="8201-9225">S/8,201 - S/9,225 (8-9 RMV)</option>
                        <option value="9226-10250">S/9,226 - S/10,250 (9-10 RMV)</option>
                        <option value="10251+">Más de S/10,250 (10+ RMV)</option>
                      </select>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Fuente principal de ingresos</label>
                      <select class="form-control" name="fuente_ingresos" required>
                        <option value="">Seleccione...</option>
                        <option value="agricola">Agrícola (cultivos)</option>
                        <option value="ganadera">Ganadera</option>
                        <option value="forestal">Forestal</option>
                        <option value="agroindustria">Agroindustria</option>
                        <option value="comercio">Comercio</option>
                        <option value="servicios">Servicios</option>
                        <option value="remesas">Remesas</option>
                        <option value="programas_sociales">Programas sociales</option>
                        <option value="jubilacion">Jubilación/pensión</option>
                        <option value="otros">Otros</option>
                      </select>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">¿Tiene otros ingresos?</label>
                      <select class="form-control" name="otros_ingresos" required>
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div class="form-group" id="otros-ingresos-group" style="display: none;">
                  <label class="form-label required">Descripción de otros ingresos</label>
                  <textarea class="form-control" name="desc_otros_ingresos" rows="2"></textarea>
                  <div class="invalid-feedback">Por favor describa los otros ingresos</div>
                </div>
                
                <div class="form-group">
                  <label class="form-label required">Nivel de dependencia de ingresos agrícolas</label>
                  <select class="form-control" name="dependencia_agricola" required>
                    <option value="">Seleccione...</option>
                    <option value="total">Total (100% dependencia)</option>
                    <option value="alta">Alta (75-99%)</option>
                    <option value="moderada">Moderada (50-74%)</option>
                    <option value="baja">Baja (25-49%)</option>
                    <option value="muy_baja">Muy baja (menos del 25%)</option>
                  </select>
                  <div class="invalid-feedback">Este campo es requerido</div>
                </div>
              </div>
              
              <!-- Sección 2: Situación laboral -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-briefcase"></i> Situación Laboral</h3>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Condición laboral</label>
                      <select class="form-control" name="condicion_laboral" required>
                        <option value="">Seleccione...</option>
                        <option value="empleador">Empleador (contrata personal)</option>
                        <option value="independiente">Trabajador independiente</option>
                        <option value="asalariado">Asalariado</option>
                        <option value="familiar_no_remunerado">Familiar no remunerado</option>
                        <option value="desempleado">Desempleado</option>
                        <option value="jubilado">Jubilado/pensionista</option>
                      </select>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Número de empleados permanentes</label>
                      <input type="number" class="form-control" name="empleados_permanentes" min="0">
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Número de empleados temporales</label>
                      <input type="number" class="form-control" name="empleados_temporales" min="0">
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Temporada alta de empleo</label>
                      <select class="form-control" name="temporada_alta">
                        <option value="">Seleccione...</option>
                        <option value="enero-marzo">Enero - Marzo</option>
                        <option value="abril-junio">Abril - Junio</option>
                        <option value="julio-septiembre">Julio - Septiembre</option>
                        <option value="octubre-diciembre">Octubre - Diciembre</option>
                        <option value="no_aplica">No aplica</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Principales actividades económicas adicionales (seleccione hasta 3)</label>
                  <div class="checkbox-group">
                    <div class="checkbox-item">
                      <input type="checkbox" id="actividad_artesania" name="actividades_adicionales[]" value="artesania">
                      <label for="actividad_artesania">Artesanía</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="actividad_turismo" name="actividades_adicionales[]" value="turismo">
                      <label for="actividad_turismo">Turismo</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="actividad_transporte" name="actividades_adicionales[]" value="transporte">
                      <label for="actividad_transporte">Transporte</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="actividad_construccion" name="actividades_adicionales[]" value="construccion">
                      <label for="actividad_construccion">Construcción</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="actividad_comercio" name="actividades_adicionales[]" value="comercio">
                      <label for="actividad_comercio">Comercio</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="actividad_otros" name="actividades_adicionales[]" value="otros" onclick="toggleOtherField(this, 'otros_actividades')">
                      <label for="actividad_otros">Otros</label>
                    </div>
                  </div>
                  <div id="otros_actividades" class="other-field">
                    <label class="form-label">Especifique otras actividades:</label>
                    <textarea class="form-control" name="otros_actividades_text" rows="2"></textarea>
                  </div>
                </div>
              </div>
              
              <!-- Sección 3: Programas y asistencia -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-hand-holding-heart"></i> Programas y Asistencia</h3>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Cuenta con programas de financiamiento?</label>
                      <select class="form-control" name="programas_financiamiento" onchange="toggleOtherField(this, 'detalle_financiamiento', 'si')">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Cuenta con programas de asistencia social?</label>
                      <select class="form-control" name="asistencia_social" onchange="toggleOtherField(this, 'detalle_asistencia', 'si')">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_financiamiento" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Programas de financiamiento</label>
                    <div class="checkbox-group">
                      <div class="checkbox-item">
                        <input type="checkbox" id="financiamiento_agrobanco" name="programas_financiamiento_detalle[]" value="agrobanco">
                        <label for="financiamiento_agrobanco">Agrobanco</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="financiamiento_mibanco" name="programas_financiamiento_detalle[]" value="mibanco">
                        <label for="financiamiento_mibanco">Mibanco</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="financiamiento_banco_comunal" name="programas_financiamiento_detalle[]" value="banco_comunal">
                        <label for="financiamiento_banco_comunal">Banco Comunal</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="financiamiento_otros" name="programas_financiamiento_detalle[]" value="otros" onclick="toggleOtherField(this, 'otros_financiamiento')">
                        <label for="financiamiento_otros">Otros</label>
                      </div>
                    </div>
                    <div id="otros_financiamiento" class="other-field">
                      <label class="form-label">Especifique otros programas:</label>
                      <textarea class="form-control" name="otros_financiamiento_text" rows="2"></textarea>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_asistencia" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Programas de asistencia social</label>
                    <div class="checkbox-group">
                      <div class="checkbox-item">
                        <input type="checkbox" id="asistencia_juntos" name="programas_asistencia_detalle[]" value="juntos">
                        <label for="asistencia_juntos">Juntos</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="asistencia_pension65" name="programas_asistencia_detalle[]" value="pension65">
                        <label for="asistencia_pension65">Pensión 65</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="asistencia_contigo" name="programas_asistencia_detalle[]" value="contigo">
                        <label for="asistencia_contigo">Contigo</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="asistencia_qali_warma" name="programas_asistencia_detalle[]" value="qali_warma">
                        <label for="asistencia_qali_warma">Qali Warma</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="asistencia_otros" name="programas_asistencia_detalle[]" value="otros" onclick="toggleOtherField(this, 'otros_asistencia')">
                        <label for="asistencia_otros">Otros</label>
                      </div>
                    </div>
                    <div id="otros_asistencia" class="other-field">
                      <label class="form-label">Especifique otros programas:</label>
                      <textarea class="form-control" name="otros_asistencia_text" rows="2"></textarea>
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Cuenta con programas de asistencia técnica?</label>
                      <select class="form-control" name="asistencia_tecnica" onchange="toggleOtherField(this, 'detalle_asistencia_tecnica', 'si')">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Recibe capacitaciones?</label>
                      <select class="form-control" name="recibe_capacitaciones" onchange="toggleOtherField(this, 'detalle_capacitaciones', 'si')">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_asistencia_tecnica" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Fuente de asistencia técnica</label>
                    <div class="checkbox-group">
                      <div class="checkbox-item">
                        <input type="checkbox" id="tecnica_agrorural" name="asistencia_tecnica_detalle[]" value="agrorural">
                        <label for="tecnica_agrorural">AGRORURAL</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="tecnica_senasa" name="asistencia_tecnica_detalle[]" value="senasa">
                        <label for="tecnica_senasa">SENASA</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="tecnica_municipalidad" name="asistencia_tecnica_detalle[]" value="municipalidad">
                        <label for="tecnica_municipalidad">Municipalidad</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="tecnica_ong" name="asistencia_tecnica_detalle[]" value="ong">
                        <label for="tecnica_ong">ONG</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="tecnica_privado" name="asistencia_tecnica_detalle[]" value="privado">
                        <label for="tecnica_privado">Empresa privada</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="tecnica_otros" name="asistencia_tecnica_detalle[]" value="otros" onclick="toggleOtherField(this, 'otros_tecnica')">
                        <label for="tecnica_otros">Otros</label>
                      </div>
                    </div>
                    <div id="otros_tecnica" class="other-field">
                      <label class="form-label">Especifique otras fuentes:</label>
                      <textarea class="form-control" name="otros_tecnica_text" rows="2"></textarea>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_capacitaciones" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Temas de capacitaciones recibidas</label>
                    <div class="species-list" id="capacitaciones-list">
                      <!-- Los elementos se añadirán dinámicamente -->
                    </div>
                    <div class="add-species">
                      <input type="text" id="new-capacitacion" class="form-control" placeholder="Ej: Manejo de cultivos, Riego tecnificado">
                      <button type="button" class="btn btn-secondary" onclick="addCapacitacion()">Añadir</button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Sección 4: Situación familiar -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-users"></i> Situación Familiar</h3>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Número de miembros en el hogar</label>
                      <input type="number" class="form-control" name="numero_miembros" min="1" required>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Número de dependientes económicos</label>
                      <input type="number" class="form-control" name="numero_dependientes" min="0" required>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Número de hijos</label>
                      <input type="number" class="form-control" name="numero_hijos" min="0">
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Hijos en edad escolar - ¿Cuántos estudian?</label>
                      <input type="number" class="form-control" name="hijos_estudian" min="0">
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">¿Quién es el jefe de familia?</label>
                      <select class="form-control" name="jefe_familia" required>
                        <option value="">Seleccione...</option>
                        <option value="padre">Padre</option>
                        <option value="madre">Madre</option>
                        <option value="ambos">Ambos</option>
                        <option value="abuelo">Abuelo/a</option>
                        <option value="hijo">Hijo/a mayor</option>
                        <option value="otro_familiar">Otro familiar</option>
                        <option value="no_aplica">No aplica</option>
                      </select>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Nivel educativo del jefe de familia</label>
                      <select class="form-control" name="nivel_educativo_jefe">
                        <option value="">Seleccione...</option>
                        <option value="ninguno">Ninguno</option>
                        <option value="primaria_incompleta">Primaria incompleta</option>
                        <option value="primaria_completa">Primaria completa</option>
                        <option value="secundaria_incompleta">Secundaria incompleta</option>
                        <option value="secundaria_completa">Secundaria completa</option>
                        <option value="tecnico_incompleto">Técnico incompleto</option>
                        <option value="tecnico_completo">Técnico completo</option>
                        <option value="universitario_incompleto">Universitario incompleto</option>
                        <option value="universitario_completo">Universitario completo</option>
                        <option value="postgrado">Postgrado</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Miembros con discapacidad o enfermedad crónica</label>
                  <div class="species-list" id="discapacidades-list">
                    <!-- Los elementos se añadirán dinámicamente -->
                  </div>
                  <div class="add-species">
                    <input type="text" id="new-discapacidad" class="form-control" placeholder="Ej: Discapacidad motora, Diabetes">
                    <button type="button" class="btn btn-secondary" onclick="addDiscapacidad()">Añadir</button>
                  </div>
                </div>
              </div>
              
              <!-- Sección 5: Servicios básicos -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-home"></i> Servicios Básicos y Vivienda</h3>
                </div>
                
                <div class="form-group">
                  <label class="form-label required">Servicios básicos con los que cuenta</label>
                  <div class="checkbox-group">
                    <div class="checkbox-item">
                      <input type="checkbox" id="agua" name="servicios_basicos[]" value="agua">
                      <label for="agua">Agua potable</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="desague" name="servicios_basicos[]" value="desague">
                      <label for="desague">Desagüe/alcantarillado</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="luz" name="servicios_basicos[]" value="luz">
                      <label for="luz">Luz eléctrica</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="internet" name="servicios_basicos[]" value="internet">
                      <label for="internet">Internet</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="telefono" name="servicios_basicos[]" value="telefono">
                      <label for="telefono">Teléfono fijo</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="gas" name="servicios_basicos[]" value="gas">
                      <label for="gas">Gas domiciliario</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="recoleccion_basura" name="servicios_basicos[]" value="recoleccion_basura">
                      <label for="recoleccion_basura">Recolección de basura</label>
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Tipo de vivienda</label>
                      <select class="form-control" name="tipo_vivienda">
                        <option value="">Seleccione...</option>
                        <option value="casa_independiente">Casa independiente</option>
                        <option value="departamento">Departamento</option>
                        <option value="quinta">Quinta</option>
                        <option value="choza">Choza/casa rústica</option>
                        <option value="precaria">Vivienda precaria</option>
                        <option value="otro">Otro</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Material predominante en paredes</label>
                      <select class="form-control" name="material_paredes">
                        <option value="">Seleccione...</option>
                        <option value="ladrillo">Ladrillo/bloque</option>
                        <option value="adobe">Adobe/tapial</option>
                        <option value="quincha">Quincha</option>
                        <option value="madera">Madera</option>
                        <option value="estera">Estera</option>
                        <option value="otros">Otros</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Material predominante en techos</label>
                      <select class="form-control" name="material_techos">
                        <option value="">Seleccione...</option>
                        <option value="concreto">Concreto</option>
                        <option value="teja">Teja</option>
                        <option value="plancha">Plancha de calamina</option>
                        <option value="paja">Paja/hojas</option>
                        <option value="otros">Otros</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Material predominante en pisos</label>
                      <select class="form-control" name="material_pisos">
                        <option value="">Seleccione...</option>
                        <option value="ceramica">Cerámica/loseta</option>
                        <option value="cemento">Cemento</option>
                        <option value="tierra">Tierra</option>
                        <option value="madera">Madera</option>
                        <option value="otros">Otros</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Detalle adicional sobre servicios básicos y vivienda</label>
                  <textarea class="form-control" name="detalle_servicios" rows="2" placeholder="Describa cualquier detalle adicional sobre sus servicios o condiciones de vivienda"></textarea>
                </div>
              </div>
              
              <!-- Sección 6: Asociaciones y sistema financiero -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-handshake"></i> Asociaciones y Sistema Financiero</h3>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Pertenece a una asociación y/o cooperativa?</label>
                      <select class="form-control" name="pertenece_asociacion" onchange="toggleOtherField(this, 'detalle_asociacion', 'si')">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Tiempo de pertenencia (años)</label>
                      <input type="number" class="form-control" name="tiempo_pertenencia" min="0">
                    </div>
                  </div>
                </div>
                
                <div id="detalle_asociacion" class="other-field">
                  <div class="form-row">
                    <div class="form-col">
                      <div class="form-group">
                        <label class="form-label">Nombre de la asociación/cooperativa</label>
                        <input type="text" class="form-control" name="nombre_asociacion">
                      </div>
                    </div>
                    <div class="form-col">
                      <div class="form-group">
                        <label class="form-label">Cargo en la asociación (si aplica)</label>
                        <input type="text" class="form-control" name="cargo_asociacion" placeholder="Ej: Presidente, Tesorero">
                      </div>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Beneficios obtenidos de la asociación</label>
                    <div class="checkbox-group">
                      <div class="checkbox-item">
                        <input type="checkbox" id="beneficio_capacitacion" name="beneficios_asociacion[]" value="capacitacion">
                        <label for="beneficio_capacitacion">Capacitación</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="beneficio_credito" name="beneficios_asociacion[]" value="credito">
                        <label for="beneficio_credito">Acceso a crédito</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="beneficio_insumos" name="beneficios_asociacion[]" value="insumos">
                        <label for="beneficio_insumos">Acceso a insumos</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="beneficio_comercializacion" name="beneficios_asociacion[]" value="comercializacion">
                        <label for="beneficio_comercializacion">Comercialización conjunta</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="beneficio_otros" name="beneficios_asociacion[]" value="otros" onclick="toggleOtherField(this, 'otros_beneficios')">
                        <label for="beneficio_otros">Otros</label>
                      </div>
                    </div>
                    <div id="otros_beneficios" class="other-field">
                      <label class="form-label">Especifique otros beneficios:</label>
                      <textarea class="form-control" name="otros_beneficios_text" rows="2"></textarea>
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Tiene acceso a los sistemas financieros?</label>
                      <select class="form-control" name="acceso_financiero" onchange="toggleOtherField(this, 'detalle_financiero', 'si')">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Tipo de acceso financiero</label>
                      <select class="form-control" name="tipo_acceso_financiero">
                        <option value="">Seleccione...</option>
                        <option value="cuenta_ahorros">Cuenta de ahorros</option>
                        <option value="cuenta_corriente">Cuenta corriente</option>
                        <option value="credito">Crédito</option>
                        <option value="otros">Otros</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_financiero" class="other-field">
                  <div class="form-row">
                    <div class="form-col">
                      <div class="form-group">
                        <label class="form-label">Institución financiera</label>
                        <select class="form-control" name="institucion_financiera">
                          <option value="">Seleccione...</option>
                          <option value="bancos">Banco (BCP, BBVA, etc.)</option>
                          <option value="cajas_municipales">Caja Municipal</option>
                          <option value="cajas_rurales">Caja Rural</option>
                          <option value="edpyme">EDPYME</option>
                          <option value="otra">Otra</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-col">
                      <div class="form-group">
                        <label class="form-label">Tiempo con acceso (años)</label>
                        <input type="number" class="form-control" name="tiempo_acceso_financiero" min="0">
                      </div>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Productos financieros utilizados</label>
                    <div class="checkbox-group">
                      <div class="checkbox-item">
                        <input type="checkbox" id="producto_ahorro" name="productos_financieros[]" value="ahorro">
                        <label for="producto_ahorro">Ahorros</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="producto_credito" name="productos_financieros[]" value="credito">
                        <label for="producto_credito">Créditos</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="producto_seguro" name="productos_financieros[]" value="seguro">
                        <label for="producto_seguro">Seguros</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="producto_remesas" name="productos_financieros[]" value="remesas">
                        <label for="producto_remesas">Remesas</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="producto_otros" name="productos_financieros[]" value="otros" onclick="toggleOtherField(this, 'otros_productos')">
                        <label for="producto_otros">Otros</label>
                      </div>
                    </div>
                    <div id="otros_productos" class="other-field">
                      <label class="form-label">Especifique otros productos:</label>
                      <textarea class="form-control" name="otros_productos_text" rows="2"></textarea>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Sección 7: Producción y comercialización -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-shopping-cart"></i> Producción y Comercialización</h3>
                </div>
                
                <div class="form-group">
                  <label class="form-label">¿Cómo vende su producción?</label>
                  <select class="form-control" name="forma_venta">
                    <option value="">Seleccione...</option>
                    <option value="directo_productor">Directo al consumidor</option>
                    <option value="intermediario">A través de intermediario</option>
                    <option value="mercado_local">En mercado local</option>
                    <option value="ferias">En ferias</option>
                    <option value="contrato">Por contrato con empresa</option>
                    <option value="cooperativa">A través de cooperativa</option>
                    <option value="otro">Otro</option>
                  </select>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿A quién le vende su producción?</label>
                      <input type="text" class="form-control" name="comprador_produccion" placeholder="Ej: Mercado local, empresa X, etc.">
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Precio promedio de venta (S/ por unidad)</label>
                      <input type="number" class="form-control" name="precio_venta" min="0" step="0.01">
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Cuánto de su producción es para consumo propio? (%)</label>
                      <input type="number" class="form-control" name="porcentaje_consumo_propio" min="0" max="100" step="5">
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Tiene problemas para comercializar?</label>
                      <select class="form-control" name="problemas_comercializacion" onchange="toggleOtherField(this, 'detalle_problemas_comercializacion', 'si')">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_problemas_comercializacion" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Principales problemas de comercialización</label>
                    <div class="checkbox-group">
                      <div class="checkbox-item">
                        <input type="checkbox" id="problema_precio" name="problemas_comercializacion_detalle[]" value="precio">
                        <label for="problema_precio">Bajos precios</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="problema_transporte" name="problemas_comercializacion_detalle[]" value="transporte">
                        <label for="problema_transporte">Falta de transporte</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="problema_intermediarios" name="problemas_comercializacion_detalle[]" value="intermediarios">
                        <label for="problema_intermediarios">Intermediarios abusivos</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="problema_calidad" name="problemas_comercializacion_detalle[]" value="calidad">
                        <label for="problema_calidad">Estándares de calidad</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="problema_volumen" name="problemas_comercializacion_detalle[]" value="volumen">
                        <label for="problema_volumen">Volumen insuficiente</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="problema_otros" name="problemas_comercializacion_detalle[]" value="otros" onclick="toggleOtherField(this, 'otros_problemas_comercializacion')">
                        <label for="problema_otros">Otros</label>
                      </div>
                    </div>
                    <div id="otros_problemas_comercializacion" class="other-field">
                      <label class="form-label">Especifique otros problemas:</label>
                      <textarea class="form-control" name="otros_problemas_comercializacion_text" rows="2"></textarea>
                    </div>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">¿Qué estrategias usa para mejorar la comercialización?</label>
                  <div class="checkbox-group">
                    <div class="checkbox-item">
                      <input type="checkbox" id="estrategia_asociacion" name="estrategias_comercializacion[]" value="asociacion">
                      <label for="estrategia_asociacion">Asociación con otros productores</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="estrategia_mejor_calidad" name="estrategias_comercializacion[]" value="mejor_calidad">
                      <label for="estrategia_mejor_calidad">Mejorar calidad del producto</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="estrategia_diversificacion" name="estrategias_comercializacion[]" value="diversificacion">
                      <label for="estrategia_diversificacion">Diversificación de productos</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="estrategia_mercados" name="estrategias_comercializacion[]" value="mercados">
                      <label for="estrategia_mercados">Acceso a nuevos mercados</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="estrategia_agregado" name="estrategias_comercializacion[]" value="agregado">
                      <label for="estrategia_agregado">Valor agregado</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="estrategia_otros" name="estrategias_comercializacion[]" value="otros" onclick="toggleOtherField(this, 'otros_estrategias')">
                      <label for="estrategia_otros">Otros</label>
                    </div>
                  </div>
                  <div id="otros_estrategias" class="other-field">
                    <label class="form-label">Especifique otras estrategias:</label>
                    <textarea class="form-control" name="otros_estrategias_text" rows="2"></textarea>
                  </div>
                </div>
              </div>
              
              <!-- Sección 8: Salud y subsidios -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-heartbeat"></i> Salud y Subsidios</h3>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Tipo de seguro de salud</label>
                      <select class="form-control" name="seguro_salud" required>
                        <option value="">Seleccione...</option>
                        <option value="essalud">ESSALUD</option>
                        <option value="sis">SIS</option>
                        <option value="privado">Privado</option>
                        <option value="eps">EPS</option>
                        <option value="ninguno">Ninguno</option>
                      </select>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">¿Recibe subsidios o ayudas del Estado?</label>
                      <select class="form-control" name="subsidios_estado" required onchange="toggleOtherField(this, 'detalle_subsidios', 'si')">
                        <option value="">Seleccione...</option>
                        <option value="si">Sí</option>
                        <option value="no">No</option>
                      </select>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_subsidios" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Programas de subsidio recibidos</label>
                    <div class="checkbox-group">
                      <div class="checkbox-item">
                        <input type="checkbox" id="subsidio_juntos" name="subsidios_recibidos[]" value="juntos">
                        <label for="subsidio_juntos">Juntos</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="subsidio_pension65" name="subsidios_recibidos[]" value="pension65">
                        <label for="subsidio_pension65">Pensión 65</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="subsidio_contigo" name="subsidios_recibidos[]" value="contigo">
                        <label for="subsidio_contigo">Contigo</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="subsidio_qaliwarma" name="subsidios_recibidos[]" value="qaliwarma">
                        <label for="subsidio_qaliwarma">Qali Warma</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="subsidio_vaso_leche" name="subsidios_recibidos[]" value="vaso_leche">
                        <label for="subsidio_vaso_leche">Vaso de Leche</label>
                      </div>
                      <div class="checkbox-item">
                        <input type="checkbox" id="subsidio_otros" name="subsidios_recibidos[]" value="otros" onclick="toggleOtherField(this, 'otros_subsidios')">
                        <label for="subsidio_otros">Otros</label>
                      </div>
                    </div>
                    <div id="otros_subsidios" class="other-field">
                      <label class="form-label">Especifique otros subsidios:</label>
                      <textarea class="form-control" name="otros_subsidios_text" rows="2"></textarea>
                    </div>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Acceso a servicios de salud</label>
                  <div class="checkbox-group">
                    <div class="checkbox-item">
                      <input type="checkbox" id="salud_postamedica" name="servicios_salud[]" value="postamedica">
                      <label for="salud_postamedica">Posta médica</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="salud_centrosalud" name="servicios_salud[]" value="centrosalud">
                      <label for="salud_centrosalud">Centro de salud</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="salud_hospital" name="servicios_salud[]" value="hospital">
                      <label for="salud_hospital">Hospital</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="salud_clinica" name="servicios_salud[]" value="clinica">
                      <label for="salud_clinica">Clínica privada</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="salud_medicotradicional" name="servicios_salud[]" value="medicotradicional">
                      <label for="salud_medicotradicional">Médico tradicional</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="salud_ninguno" name="servicios_salud[]" value="ninguno">
                      <label for="salud_ninguno">Ninguno</label>
                    </div>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Distancia al centro de salud más cercano (km)</label>
                  <input type="number" class="form-control" name="distancia_salud" min="0" step="0.1">
                </div>
              </div>
              
              <!-- Sección 9: Tenencia de tierra -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-landmark"></i> Tenencia de Tierra</h3>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Situación actual de tenencia</label>
                      <select class="form-control" name="tenencia_tierra" required onchange="toggleOtherField(this, 'detalle_tenencia', 'otro')">
                        <option value="">Seleccione...</option>
                        <option value="titulado">Titulado</option>
                        <option value="posesion">En posesión</option>
                        <option value="arrendado">Arrendado</option>
                        <option value="comunero">Comunero</option>
                        <option value="precario">Precario</option>
                        <option value="otro">Otro</option>
                      </select>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label required">Tiempo de posesión (años)</label>
                      <input type="number" class="form-control" name="tiempo_posesion" min="0" required>
                      <div class="invalid-feedback">Este campo es requerido</div>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_tenencia" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Detalles de la tenencia</label>
                    <textarea class="form-control" name="detalle_tenencia_text" rows="2" placeholder="Describa detalles sobre la situación de tenencia de la tierra"></textarea>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Tiene conflictos por la tierra?</label>
                      <select class="form-control" name="conflictos_tierra" onchange="toggleOtherField(this, 'detalle_conflictos', 'si')">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Está en proceso de formalización?</label>
                      <select class="form-control" name="proceso_formalizacion">
                        <option value="no">No</option>
                        <option value="si">Sí</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div id="detalle_conflictos" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Descripción de los conflictos</label>
                    <textarea class="form-control" name="detalle_conflictos_text" rows="2" placeholder="Describa la naturaleza de los conflictos por la tierra"></textarea>
                  </div>
                </div>
              </div>
              
              <!-- Sección 10: Comunicación y conocimiento del CUSAF -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-comments"></i> Comunicación y Conocimiento del CUSAF</h3>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Medios de comunicación que utiliza</label>
                  <div class="species-list" id="medios-comunicacion-list">
                    <!-- Los elementos se añadirán dinámicamente -->
                  </div>
                  <div class="add-species">
                    <input type="text" id="new-medio" class="form-control" placeholder="Ej: Radio, TV, Internet, Periódico">
                    <button type="button" class="btn btn-secondary" onclick="addMedio()"><i class="fas fa-plus"></i> Añadir</button>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Conoce el programa CUSAF?</label>
                      <select class="form-control" name="conoce_cusaf" onchange="toggleOtherField(this, 'detalle_conocimiento', 'si')">
                        <option value="si">Sí</option>
                        <option value="no">No</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">¿Cómo se enteró del CUSAF?</label>
                      <input type="text" class="form-control" name="medio_conocimiento_cusaf" placeholder="Ej: Vecino, radio, municipalidad">
                    </div>
                  </div>
                </div>
                
                <div id="detalle_conocimiento" class="other-field">
                  <div class="form-group">
                    <label class="form-label">Nivel de conocimiento sobre el CUSAF</label>
                    <select class="form-control" name="nivel_conocimiento_cusaf">
                      <option value="">Seleccione...</option>
                      <option value="alto">Alto (conoce objetivos, beneficios y requisitos)</option>
                      <option value="medio">Medio (conoce algunos beneficios y requisitos)</option>
                      <option value="bajo">Bajo (solo ha escuchado el nombre)</option>
                    </select>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">¿Qué beneficios espera del CUSAF?</label>
                  <textarea class="form-control" name="beneficios_esperados" rows="2" placeholder="Describa los beneficios que espera obtener del programa CUSAF"></textarea>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Disposición a participar en actividades del CUSAF</label>
                  <select class="form-control" name="disposicion_participacion">
                    <option value="">Seleccione...</option>
                    <option value="alta">Alta (participaría en todas las actividades)</option>
                    <option value="media">Media (participaría en algunas actividades)</option>
                    <option value="baja">Baja (poca disponibilidad para participar)</option>
                  </select>
                </div>
              </div>
              
              <!-- Sección 11: Actitudes y financiamiento -->
              <div class="section">
                <div class="section-header">
                  <h3><i class="fas fa-hand-holding-usd"></i> Actitudes y Financiamiento</h3>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Autoridad de confianza</label>
                  <select class="form-control" name="autoridad_confianza">
                    <option value="">Seleccione...</option>
                    <option value="municipalidad">Municipalidad</option>
                    <option value="comunidad">Comunidad</option>
                    <option value="organizacion">Organización social</option>
                    <option value="gobierno_regional">Gobierno regional</option>
                    <option value="ministerio">Ministerio</option>
                    <option value="ninguna">Ninguna</option>
                  </select>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Actitud frente al financiamiento</label>
                      <select class="form-control" name="actitud_financiamiento">
                        <option value="positiva">Positiva (acepta créditos)</option>
                        <option value="neutral">Neutral</option>
                        <option value="negativa">Negativa (prefiere no endeudarse)</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Actitud frente al pago por arrendamiento</label>
                      <select class="form-control" name="actitud_arrendamiento">
                        <option value="positiva">Positiva (acepta pagar)</option>
                        <option value="neutral">Neutral</option>
                        <option value="negativa">Negativa (no acepta pagar)</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Inversión en los últimos 12 meses (S/)</label>
                      <input type="number" class="form-control" name="inversion_12meses" min="0" step="100">
                    </div>
                  </div>
                  <div class="form-col">
                    <div class="form-group">
                      <label class="form-label">Principal fuente de inversión</label>
                      <select class="form-control" name="fuente_inversion">
                        <option value="">Seleccione...</option>
                        <option value="ahorros">Ahorros personales</option>
                        <option value="credito">Crédito bancario</option>
                        <option value="familia">Familiares</option>
                        <option value="programa">Programa estatal</option>
                        <option value="otros">Otros</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">Capacidad de ahorro mensual (S/)</label>
                  <select class="form-control" name="capacidad_ahorro">
                    <option value="">Seleccione...</option>
                    <option value="0">No ahorra</option>
                    <option value="1-100">S/1 - S/100</option>
                    <option value="101-300">S/101 - S/300</option>
                    <option value="301-500">S/301 - S/500</option>
                    <option value="501+">Más de S/500</option>
                  </select>
                </div>
              </div>
              
              <!-- Botones de navegación -->
              <div class="form-actions">
                <div>
                  <a href="beneficiarios.html"><button type="button" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Anterior</button></a>
                </div>
                <div>
                  <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Guardar</button>
                  <a href="potencialesbeneficiarios_datosagricolas.html"><button type="button" class="btn btn-primary">Siguiente <i class="fas fa-arrow-right"></i></button></a>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Mostrar/ocultar campo de otros ingresos según selección
    document.querySelector('[name="otros_ingresos"]').addEventListener('change', function() {
      const otrosIngresosGroup = document.getElementById('otros-ingresos-group');
      otrosIngresosGroup.style.display = this.value === 'si' ? 'block' : 'none';
      
      if (this.value === 'si') {
        document.querySelector('[name="desc_otros_ingresos"]').required = true;
      } else {
        document.querySelector('[name="desc_otros_ingresos"]').required = false;
      }
    });
    
    // Función genérica para mostrar/ocultar campos adicionales
    function toggleOtherField(selectElement, fieldId, triggerValue = 'otro') {
      const field = document.getElementById(fieldId);
      if (selectElement.value === triggerValue || 
          (selectElement.type === 'checkbox' && selectElement.checked && selectElement.value === triggerValue)) {
        field.style.display = 'block';
        
        // Hacer requeridos los campos dentro del campo adicional si es necesario
        const requiredInputs = field.querySelectorAll('[required]');
        requiredInputs.forEach(input => {
          input.required = true;
        });
      } else {
        field.style.display = 'none';
        
        // Quitar el requerido de los campos dentro del campo adicional
        const requiredInputs = field.querySelectorAll('[required]');
        requiredInputs.forEach(input => {
          input.required = false;
        });
      }
    }
    
    // Función para añadir medios de comunicación
    function addMedio() {
      const medioInput = document.getElementById('new-medio');
      const medioName = medioInput.value.trim();
      
      if (medioName) {
        const list = document.getElementById('medios-comunicacion-list');
        const medioItem = document.createElement('div');
        medioItem.className = 'species-item';
        medioItem.innerHTML = `
          <span>${medioName}</span>
          <i class="fas fa-times" onclick="removeItem(this)"></i>
          <input type="hidden" name="medios_comunicacion[]" value="${medioName}">
        `;
        list.appendChild(medioItem);
        medioInput.value = '';
      }
    }
    
    // Función para añadir capacitaciones
    function addCapacitacion() {
      const capacitacionInput = document.getElementById('new-capacitacion');
      const capacitacionName = capacitacionInput.value.trim();
      
      if (capacitacionName) {
        const list = document.getElementById('capacitaciones-list');
        const capacitacionItem = document.createElement('div');
        capacitacionItem.className = 'species-item';
        capacitacionItem.innerHTML = `
          <span>${capacitacionName}</span>
          <i class="fas fa-times" onclick="removeItem(this)"></i>
          <input type="hidden" name="capacitaciones_recibidas[]" value="${capacitacionName}">
        `;
        list.appendChild(capacitacionItem);
        capacitacionInput.value = '';
      }
    }
    
    // Función para añadir discapacidades
    function addDiscapacidad() {
      const discapacidadInput = document.getElementById('new-discapacidad');
      const discapacidadName = discapacidadInput.value.trim();
      
      if (discapacidadName) {
        const list = document.getElementById('discapacidades-list');
        const discapacidadItem = document.createElement('div');
        discapacidadItem.className = 'species-item';
        discapacidadItem.innerHTML = `
          <span>${discapacidadName}</span>
          <i class="fas fa-times" onclick="removeItem(this)"></i>
          <input type="hidden" name="discapacidades_enfermedades[]" value="${discapacidadName}">
        `;
        list.appendChild(discapacidadItem);
        discapacidadInput.value = '';
      }
    }
    
    // Función genérica para eliminar items de listas
    function removeItem(element) {
      element.parentElement.remove();
    }
    
    // Validación del formulario antes de enviar
    document.getElementById('socioeconomic-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Resetear estilos de validación
      const inputs = this.querySelectorAll('.form-control');
      inputs.forEach(input => {
        input.classList.remove('is-invalid');
      });
      
      // Validar campos requeridos
      const requiredFields = this.querySelectorAll('[required]');
      let isValid = true;
      
      requiredFields.forEach(field => {
        if (!field.value.trim()) {
          field.classList.add('is-invalid');
          isValid = false;
        }
      });
      
      if (isValid) {
        // Mostrar mensaje de éxito
        alert('Formulario validado correctamente. Los datos han sido guardados.');
        
        // Aquí iría la lógica para enviar el formulario
        // this.submit(); // Descomentar para enviar realmente el formulario
        
        // Redirigir a la siguiente página (simulado)
        // window.location.href = 'potencialesbeneficiarios_datosagricolas.html';
      } else {
        // Mostrar mensaje de error
        const errorMessage = document.createElement('div');
        errorMessage.className = 'alert alert-danger';
        errorMessage.innerHTML = '<i class="fas fa-exclamation-circle"></i> Por favor complete todos los campos obligatorios.';
        errorMessage.style.marginTop = '20px';
        
        const existingError = this.querySelector('.alert-danger');
        if (existingError) {
          existingError.remove();
        }
        
        this.insertBefore(errorMessage, this.firstChild);
        
        // Desplazarse al primer error
        const firstInvalid = this.querySelector('.is-invalid');
        if (firstInvalid) {
          firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      }
    });
    
    // Inicializar campos que deben mostrarse según valores predefinidos
    document.addEventListener('DOMContentLoaded', function() {
      // Ejemplo: Si otros ingresos está marcado como "Sí", mostrar el campo
      if (document.querySelector('[name="otros_ingresos"]').value === 'si') {
        document.getElementById('otros-ingresos-group').style.display = 'block';
      }
      
      // Agregar eventos a todos los selects y checkboxes que puedan mostrar campos adicionales
      const dynamicFields = document.querySelectorAll('[onchange*="toggleOtherField"]');
      dynamicFields.forEach(field => {
        field.addEventListener('change', function() {
          const func = new Function('selectElement', this.getAttribute('onchange'));
          func(this);
        });
        
        // Ejecutar una vez para inicializar el estado
        const func = new Function('selectElement', field.getAttribute('onchange'));
        func(field);
      });
    });
  </script>
</body>
</html>
